(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{148:function(e,t,c){},179:function(e,t,c){"use strict";c.r(t);var n=c(1),s=c.n(n),r=c(30),i=c.n(r),a=c(10),l=c(9),o=c(4),u=c(3),j=c(8),d=c.n(j),b=c(15),O=c(6),h=c.n(O),f="https://backend-class-aid.herokuapp.com/api/",x="user/",m="course/",p="enroll/",v="quiz/",g="file/",_=function(){return"".concat(f).concat(p,"enrollCourse")},w=function(){return"".concat(f).concat(p,"unenroll")},C=function(e){return"".concat(f).concat(m,"detail/").concat(e)},N=function(e){return"".concat(f).concat(m,"message/course/").concat(e)},y=function(e){return"".concat(f).concat(p,"user/waitlist/").concat(e)},S=c(56),k=function(){return function(){var e=Object(b.a)(d.a.mark((function e(t){var c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=localStorage.getItem("token"),h.a.post("".concat(f).concat(x,"refreshLogin"),{},{headers:{"auth-token":c}}).then((function(e){var c=Object(S.a)(e.data);t({type:"USER_LOGIN",payload:{user:c,token:e.data,isLogin:!0}}),t({type:"CLEAR_ERROR"}),localStorage.setItem("token",e.data),localStorage.setItem("user",JSON.stringify(c))})).catch((function(e){t({type:"ERROR_LOGIN",payload:{error:e.response}})}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},E=c(7),R=c(94),L=c.n(R),A=c(0);var M=function(e){var t=e.courses,c=e.name;return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)("h5",{children:c}),Object(A.jsx)("div",{className:"course-container",children:t.map((function(e){return Object(A.jsx)(a.b,{to:"/course/".concat(e.course),children:Object(A.jsxs)("div",{className:"course",children:[Object(A.jsx)("img",{src:"https://via.placeholder.com/80",alt:""}),Object(A.jsx)("span",{children:e.name})]})},e._id)}))})]})},U=c(5),D=c(40),W=c.n(D);var F=function(e){var t=e.course,c=e.user,s=e.setAddCourseWindow,r=e.setWaitListWindow,i=e.token,l=e.fetchCourse,u=Object(n.useState)([]),j=Object(o.a)(u,2),d=j[0],b=j[1];function O(e){e.preventDefault(),h.a.post(_(),{user_id:c._id,course_id:e.target.value},{headers:{"auth-token":i}}).then((function(){return l()})),r(!0)}function f(e){e.preventDefault(),h.a.delete(y(e.target.value)),l()}return Object(n.useEffect)((function(){!function(){var e=t.courses.map((function(e){var c=t.waitlist.filter((function(t){return t.course_id===e._id}));return c.length>0?Object(U.a)(Object(U.a)({},e),{},{waitlist_id:c[0]._id}):Object(U.a)(Object(U.a)({},e),{},{waitlist_id:null})})),c=t.mycourses.map((function(e){return e._id})),n=e.filter((function(e){return!c.includes(e._id)}));b(n)}()}),[l]),Object(A.jsxs)("div",{className:"all-course-section-container",children:[Object(A.jsx)("div",{className:"back-link",children:Object(A.jsxs)(a.b,{to:"/",children:[Object(A.jsx)(W.a,{}),"Back"]})}),Object(A.jsx)("div",{className:"course-head",children:Object(A.jsx)("h3",{children:c.is_admin?"Join or create course":"Join course"})}),Object(A.jsxs)("div",{className:"course-container",children:[c.is_admin?Object(A.jsxs)("div",{className:"course",children:[Object(A.jsx)("img",{src:"https://via.placeholder.com/80",alt:""}),Object(A.jsx)("span",{children:"Create a course"}),Object(A.jsx)("hr",{}),Object(A.jsx)("button",{className:"create-course-button",onClick:function(){return s(!0)},children:"Create course"})]}):null,d.map((function(e){return Object(A.jsxs)("div",{className:"course",children:[Object(A.jsx)("img",{src:"https://via.placeholder.com/80",alt:""}),Object(A.jsxs)("span",{children:[e.course,e.name]}),Object(A.jsx)("hr",{}),c._id===e.author_id?Object(A.jsx)(a.b,{className:"author-button",to:"/course/".concat(e.course),children:"Go to course"}):Object(A.jsx)(A.Fragment,{children:null!==e.waitlist_id?Object(A.jsx)("button",{value:e.waitlist_id,onClick:f,children:"Cancle"}):Object(A.jsx)("button",{value:e._id,onClick:O,children:"Join course"})})]},e._id)}))]})]})};var I={padding:"0.25rem 0"},q=function(e){var t=e.closeWindow,c=e.token,n=e.selected,s=e.initCourse,r=(Object(u.b)(),Object(u.c)((function(e){return e.selectCourse})).enrollList);function i(e){e.preventDefault(),h.a.post(_(),{user_id:e.target.value,course_id:n._id},{headers:{"auth-token":c}}).then((function(e){console.log(e.data.course_id),s(),E.b.success("Add member success")})).catch((function(e){console.log(e.response)}))}return Object(u.c)((function(e){return e.login})).user,Object(A.jsx)("div",{className:"float-window",children:Object(A.jsxs)("div",{className:"float-window-container",children:[Object(A.jsxs)("div",{className:"user-container",children:[Object(A.jsx)("h4",{children:"Add members to course"}),Object(A.jsx)("ul",{children:r.map((function(e){return Object(A.jsxs)("li",{style:I,children:[Object(A.jsx)("span",{children:e.name})," ",Object(A.jsx)("button",{value:e._id,onClick:i,children:"Add"})]},e._id)}))})]}),Object(A.jsx)("div",{className:"button-container",children:Object(A.jsx)("button",{onClick:t,children:"Close"})})]})})};function z(e){var t=e.selectCourse,c=e.courseAuthor,s=e.setAddMemberWindow,r=e.fetchCourse,i=e.token,j=e.setChatWindow,d=e.resetWindow,b=e.setUserWindow,O=e.setQuizWindow,f=e.setRankingWindow,x=Object(l.g)(),m=Object(n.useState)(!1),p=Object(o.a)(m,2),v=p[0],g=p[1],_=Object(u.c)((function(e){return e.login})).user;return Object(n.useEffect)((function(){v&&(x.push("/"),r())}),[v]),Object(A.jsxs)("div",{className:"left-section",children:[Object(A.jsx)("div",{className:"back-link",children:Object(A.jsxs)(a.b,{to:"/",children:[Object(A.jsx)(W.a,{}),"Back"]})}),Object(A.jsx)("img",{src:"https://via.placeholder.com/80",alt:""}),Object(A.jsxs)("div",{children:[Object(A.jsx)("span",{children:t.selected.name}),Object(A.jsxs)("ul",{children:[Object(A.jsx)("li",{onClick:function(){d(),j(!0)},children:"General"}),Object(A.jsx)("li",{onClick:function(){d(),f(!0)},children:"Ranking"}),Object(A.jsx)("li",{onClick:function(){d(),b(!0)},children:"Manage course"}),c?Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)("li",{onClick:function(){return s(!0)},children:"Add member"}),Object(A.jsx)("li",{onClick:function(){d(),O(!0)},children:"Quiz"}),Object(A.jsx)(T,{course_id:t.selected._id,token:i,setRemoveCourse:g})]}):null,c?null:Object(A.jsx)("li",{onClick:function(){h.a.post(w(),{course_id:t.selected._id,user_id:_._id},{headers:{"auth-token":i}}).then((function(){alert("SUCESS UNROLLED"),x.push("/")})).catch((function(e){console.log(e)}))},children:"Leave the course"})]})]})]})}function T(e){var t=e.token,c=e.course_id,n=e.setRemoveCourse;return Object(A.jsx)("li",{onClick:function(e){var s;e.preventDefault(),h.a.post((s=c,"".concat(f).concat(m,"remove/").concat(s)),{},{headers:{"auth-token":t}}).then((function(){alert("REMOVE COURSE SUCCESS"),n(!0)})).catch((function(e){return console.log(e)}))},children:"Delete the course"})}var G=c(41),Z=c(92),Q=c.n(Z),J=c(59),P=c.n(J),B=c(93),H=c.n(B);function V(e){var t=e.message,c=e.name,n=!1;return t.user===c&&(n=!0),Object(A.jsx)(A.Fragment,{children:n?Object(A.jsxs)("div",{className:"messageContainer justifyEnd",children:[Object(A.jsx)("p",{className:"sentText pr-10",children:t.user}),Object(A.jsx)("div",{className:"messageBox backgroundBlue",children:Object(A.jsx)("p",{className:"messageText colorWhite",children:P.a.emojify(t.text)})})]}):Object(A.jsxs)("div",{className:"messageContainer justifyStart",children:[Object(A.jsx)("div",{className:"messageBox backgroundLight",children:Object(A.jsx)("p",{className:"messageText colorDark",children:P.a.emojify(t.text)})}),Object(A.jsx)("p",{className:"sentText pl-10 ",children:t.user})]})})}var X=function(e){e.getMessage;var t=e.messages,c=e.socket,s=Object(n.useRef)(null),r=Object(u.c)((function(e){return e.login})),i=r.token,a=r.user,l=Object(u.c)((function(e){return e.selectCourse}));function o(){""!==s.current.value&&(c.emit("sendMsg",s.current.value),h.a.post(N(l.selected._id),{message:s.current.value},{headers:{"auth-token":i}}).then((function(e){})).catch((function(e){return console.log(e.response)})),s.current.value="")}return Object(A.jsxs)("div",{className:"Chatx",children:[Object(A.jsx)(Q.a,{className:"scroll",children:t.map((function(e){return Object(A.jsx)(V,{message:e,name:a.name})}))}),Object(A.jsxs)("div",{className:"chat-input",children:[Object(A.jsx)("input",{type:"text",ref:s,onKeyDown:function(e){"Enter"===e.code&&o()},placeholder:"Start a new converstaion."}),Object(A.jsx)("div",{className:"send-button",onClick:o,children:Object(A.jsx)(H.a,{})})]})]})};var Y=function(){var e=Object(u.c)((function(e){return e.selectCourse})).selected,t=Object(u.c)((function(e){return e.login})).token,c=Object(n.useState)([]),s=Object(o.a)(c,2),r=s[0],i=s[1],a=Object(n.useCallback)((function(){var t;"undefined"!==typeof e._id&&h.a.get((t=e._id,"".concat(f).concat(p,"class/waitlist/").concat(t))).then((function(e){i(e.data)}))}),[e._id]);function l(e){e.preventDefault(),console.log(e.target.value),h.a.post("".concat(f).concat(p,"waitListAccept"),{_id:e.target.value},{headers:{"auth-token":t}}).then((function(e){a(),console.log(e.data)})).catch((function(e){console.log(e)}))}return Object(n.useEffect)((function(){a()}),[a]),Object(A.jsxs)("div",{children:[Object(A.jsx)("h3",{children:"WAIT LIST"}),r.length>0?Object(A.jsxs)(A.Fragment,{children:[" ",r.map((function(e){return Object(A.jsxs)("ul",{className:"row",children:[Object(A.jsx)("li",{children:e.name}),Object(A.jsx)("li",{children:e.email}),Object(A.jsx)("li",{}),Object(A.jsx)("li",{children:Object(A.jsx)("button",{onClick:l,value:e._id,children:"Enroll"})})]},e._id)}))]}):Object(A.jsx)("ul",{className:"row",children:Object(A.jsx)("li",{children:"No waitlist yet"})})]})};var K=function(e){var t=e.setQuiz,c=[Object(n.useRef)(null),Object(n.useRef)(null),Object(n.useRef)(null),Object(n.useRef)(null)],s=Object(n.useRef)(null),r=Object(n.useRef)(null),i=Object(n.useRef)(null),a=Object(n.useRef)(null),l=Object(u.c)((function(e){return e.selectCourse})).selected,o=Object(u.c)((function(e){return e.login})).token;return Object(A.jsxs)("div",{className:"create-quiz-container",children:[Object(A.jsx)("h3",{children:"Create Quiz"}),Object(A.jsxs)("form",{onSubmit:function(e){e.preventDefault();var n,u=c[s.current.value-1].current.value,j={question:i.current.value,choice:[c[0].current.value,c[1].current.value,c[2].current.value,c[3].current.value],score:r.current.value,answer:u};h.a.post((n=l._id,"".concat(f).concat(v).concat(n,"/add")),j,{headers:{"auth-token":o}}).then((function(e){console.log(e),E.b.success("Create quiz success"),t(),a.current.reset()}))},ref:a,children:[Object(A.jsxs)("div",{children:[Object(A.jsx)("label",{htmlFor:"Questtion",children:"Question"}),Object(A.jsx)("input",{type:"text",ref:i,required:!0})]}),Object(A.jsxs)("div",{children:[Object(A.jsx)("label",{htmlFor:"Choice",children:"Choice 1"}),Object(A.jsx)("input",{type:"text",ref:c[0],required:!0})]}),Object(A.jsxs)("div",{children:[Object(A.jsx)("label",{htmlFor:"Choice",children:"Choice 2"}),Object(A.jsx)("input",{type:"text",ref:c[1],required:!0})]}),Object(A.jsxs)("div",{children:[Object(A.jsx)("label",{htmlFor:"Choice",children:"Choice 3"}),Object(A.jsx)("input",{type:"text",ref:c[2],required:!0})]}),Object(A.jsxs)("div",{children:[Object(A.jsx)("label",{htmlFor:"Choice",children:"Choice 4"}),Object(A.jsx)("input",{type:"text",ref:c[3],required:!0})]}),Object(A.jsxs)("div",{children:[Object(A.jsxs)("div",{className:"half",children:[Object(A.jsx)("label",{htmlFor:"answer",children:"What is true choie"}),Object(A.jsxs)("select",{ref:s,children:[Object(A.jsx)("option",{value:"1",children:"Choice 1"}),Object(A.jsx)("option",{value:"2",children:"Choice 2"}),Object(A.jsx)("option",{value:"3",children:"Choice 3"}),Object(A.jsx)("option",{value:"4",children:"Choice 4"})]})]}),Object(A.jsxs)("div",{className:"half",children:[Object(A.jsx)("label",{htmlFor:"score",children:"Score"}),Object(A.jsx)("input",{type:"text",ref:r,required:!0})]})]}),Object(A.jsx)("button",{type:"submit",children:"Creat Quiz"})]})]})};var $=function(e){var t=e.setQuiz,c=e.quizlist,n=e.socket,s=Object(u.c)((function(e){return e.selectCourse})).selected,r=Object(u.c)((function(e){return e.login})).token;function i(e){e.preventDefault(),n.emit("quiztime",e.target.value,s.course),E.b.success("Emit quiz")}function a(e){var c,n;e.preventDefault(),h.a.post((c=s._id,n=e.target.value,"".concat(f).concat(v).concat(c,"/remove/").concat(n)),{},{headers:{"auth-token":r}}).then((function(){t(),E.b.success("Remove quiz success")}))}return Object(A.jsx)(A.Fragment,{children:Object(A.jsxs)("div",{className:"quiz-list",children:[Object(A.jsx)("h2",{children:"QuizList"}),c&&Object(A.jsx)("div",{className:"row",children:c.map((function(e){return Object(A.jsxs)("div",{className:"card",children:[Object(A.jsxs)("h3",{children:["Question : ",e.question]}),Object(A.jsxs)("h4",{children:["score : ",e.score]}),Object(A.jsxs)("div",{children:[Object(A.jsx)("button",{value:e._id,onClick:i,children:"Start Quiz"}),Object(A.jsx)("button",{value:e._id,onClick:a,children:"DELETE"})]})]},e._id)}))})]})})};var ee=function(e){var t=e.socket,c=Object(u.c)((function(e){return e.selectCourse})).selected,s=Object(u.c)((function(e){return e.login})).token,r=Object(n.useState)([]),i=Object(o.a)(r,2),a=i[0],l=i[1],j=Object(n.useCallback)((function(){var e;c._id,h.a.get((e=c._id,"".concat(f).concat(v).concat(e)),{headers:{"auth-token":s}}).then((function(e){l(e.data)}))}),[c._id,s]);return Object(n.useEffect)((function(){j()}),[j]),Object(A.jsxs)("div",{className:"quiz-container",children:[Object(A.jsx)(K,{setQuiz:j}),Object(A.jsx)($,{setQuiz:j,quizlist:a,socket:t})]})};var te=function(e){var t=e.data,c=e.setQuiz,n=Object(u.c)((function(e){return e.login})).user;function s(e){c(null),E.b.error("False try again next quiz!")}function r(e){var s,r;c(null),h.a.patch((s=n._id,r=t._id,"".concat(f).concat(p,"student/").concat(s,"/quiz/").concat(r))).then((function(e){return Object(E.b)("Good Job!",{icon:"\ud83d\udc4f"})})).catch((function(e){return console.log(e)}))}return Object(A.jsx)("div",{className:"float-window",children:Object(A.jsx)("div",{className:"float-window-container",children:Object(A.jsxs)("div",{className:"quiz-box",children:[Object(A.jsxs)("div",{children:[Object(A.jsx)("h3",{children:"Question"}),Object(A.jsx)("h4",{children:t.question})]}),Object(A.jsx)("ul",{children:t.choice.map((function(e,c){return e===t.answer?Object(A.jsx)("li",{children:Object(A.jsx)("button",{onClick:r,children:e})},c):Object(A.jsx)("li",{children:Object(A.jsx)("button",{onClick:s,children:e})},c)}))})]})})})};var ce=function(e){var t=e.id,c=Object(n.useState)([]),s=Object(o.a)(c,2),r=s[0],i=s[1],a=Object(n.useState)(!0),l=Object(o.a)(a,2),u=l[0],j=l[1];return Object(n.useEffect)((function(){h.a.get(function(e){return"".concat(f).concat(p,"ranking/").concat(e)}(t)).then((function(e){i(e.data),j(!1)})).catch((function(e){return console.log(e.response)}))}),[]),Object(A.jsx)("div",{className:"user-container",children:u?"LOADING":Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)("h3",{children:"Owners"}),Object(A.jsxs)("ul",{className:"row head",children:[Object(A.jsx)("li",{children:"Name"}),Object(A.jsx)("li",{children:"Email"}),Object(A.jsx)("li",{children:"Score"})]}),r.map((function(e){return Object(A.jsxs)("ul",{className:"row",children:[Object(A.jsx)("li",{children:e.user}),Object(A.jsx)("li",{children:e.email}),Object(A.jsx)("li",{children:e.score})]})}))]})})};function ne(e){var t=e.fetchMaterail,c=e.user_id,s=e.course_id,r=Object(n.useState)(),i=Object(o.a)(r,2),a=i[0],l=i[1],u=Object(n.useRef)(null),j=Object(n.useRef)(null);return Object(A.jsxs)("form",{onSubmit:function(e){e.preventDefault();var n,r,i=new FormData;i.append("file",a.file[0]),i.append("description",u.current.value),h.a.post((n=s,r=c,"".concat(f).concat(g).concat(n,"/").concat(r)),i).then((function(e){console.log(e),t(),j.current.reset(),E.b.success("File uploaded")})).catch((function(e){console.log(e),E.b.error(e.response.data)}))},ref:j,className:"file-upload-head",children:[Object(A.jsx)("h4",{children:"File Upload"}),Object(A.jsxs)("div",{children:[Object(A.jsx)("input",{type:"file",onChange:function(e){l({file:e.target.files})},required:!0,className:"file-upload-input"}),Object(A.jsx)("input",{type:"text",ref:u,placeholder:"File name (Optional)",className:"file-name-input"})]}),Object(A.jsx)("button",{className:"upload-button",type:"submit",children:"Upload"})]})}function se(e){var t=e.file;return Object(A.jsxs)("div",{className:"file-upload-content",children:[Object(A.jsxs)("div",{className:"row",children:[Object(A.jsx)("div",{children:"Name"}),Object(A.jsx)("div",{children:"Modified"}),Object(A.jsx)("div",{children:"Modified By"}),Object(A.jsx)("div",{})]}),t.length>0?t.map((function(e,c){return Object(A.jsxs)("div",{className:"row",children:[Object(A.jsx)("div",{children:Object(A.jsx)("a",{href:e.clound_path,children:e.description.length>0?"".concat(e.description):"FILE: ".concat(c)})},t._id),Object(A.jsx)("div",{children:re(e.modify_date)}),Object(A.jsx)("div",{children:e.name}),Object(A.jsx)("div",{children:"delete"})]})})):Object(A.jsx)("div",{className:"row",children:Object(A.jsx)("h4",{children:"No file in course"})})]})}function re(e){var t=e.split("T")[0],c=t.split("-")[2],n=parseInt(t.split("-")[1])-1,s=t.split("-")[0];return"".concat(["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][n]," ").concat(c,", ").concat(s)}function ie(e){var t=e.selectCourse,c=e.login,n=e.onlineUser,s=e.fillterOnlineUser,r=e.initCourse;function i(e){e.preventDefault(),h.a.post(w(),{course_id:t.selected._id,user_id:e.target.value},{headers:{"auth-token":c.token}}).then((function(){console.log("UNROLLED"),r()})).catch((function(e){console.log(e)}))}return Object(A.jsx)(A.Fragment,{children:Object(A.jsxs)("div",{className:"user-container",children:[Object(A.jsx)("h3",{children:"Owners"}),Object(A.jsxs)("ul",{className:"row head",children:[Object(A.jsx)("li",{children:"Name"}),Object(A.jsx)("li",{children:"Email"}),Object(A.jsx)("li",{children:"Role"}),Object(A.jsx)("li",{})]}),Object(A.jsxs)("ul",{className:"row",children:[Object(A.jsx)("li",{children:t.courseAuthor.name}),Object(A.jsx)("li",{children:t.courseAuthor.email}),Object(A.jsx)("li",{children:"Owner"}),Object(A.jsx)("li",{})]}),c.user._id===t.selected.author_id?Object(A.jsx)(Y,{}):null,Object(A.jsxs)("div",{children:[Object(A.jsx)("h3",{children:"Member"}),Object(A.jsxs)("ul",{className:"row head",children:[Object(A.jsx)("li",{children:"Name"}),Object(A.jsx)("li",{children:"Email"}),Object(A.jsx)("li",{children:"Status"}),Object(A.jsx)("li",{})]}),n.map((function(e){return Object(A.jsxs)("ul",{className:"row",children:[Object(A.jsx)("li",{children:e.name}),Object(A.jsx)("li",{children:e.email}),Object(A.jsx)("li",{children:e.online?"ONLINE":"OFFLINE"}),Object(A.jsx)("li",{children:t.selected.author_id!==c.user._id&&c.user._id!==e._id||e._id===t.selected.author_id?null:Object(A.jsx)("button",{onClick:i,value:e._id,children:"UNROLL"})})]},e._id)})),s.map((function(e){return Object(A.jsxs)("ul",{className:"row",children:[Object(A.jsx)("li",{children:e.name}),Object(A.jsx)("li",{children:e.email}),Object(A.jsx)("li",{children:e.online?"ONLINE":"OFFLINE"}),Object(A.jsx)("li",{children:t.selected.author_id!==c.user._id&&c.user._id!==e._id||e._id===t.selected.author_id?null:Object(A.jsx)("button",{onClick:i,value:e._id,children:"UNROLL"})})]},e._id)}))]})]})})}var ae=function(e){var t=e.socket,c=e.courseSelect,s=e.chatWindow,r=e.userWindow,i=e.quizWindow,a=e.setAddMemberWindow,l=e.rankingWindow,j=e.initCourse,d=Object(u.c)((function(e){return e.login})),b=Object(u.c)((function(e){return e.selectCourse})),O=Object(n.useState)([]),x=Object(o.a)(O,2),m=x[0],p=x[1],v=Object(n.useState)([]),_=Object(o.a)(v,2),w=_[0],C=_[1],y=Object(n.useState)([]),S=Object(o.a)(y,2),k=S[0],R=S[1],L=Object(n.useState)(null),M=Object(o.a)(L,2),U=M[0],D=M[1],W=Object(n.useState)(b.selected.author_id!==d.user._id),F=Object(o.a)(W,2),I=F[0],q=(F[1],Object(n.useState)(!0)),z=Object(o.a)(q,2),T=z[0],Z=z[1],Q=Object(n.useState)(!1),J=Object(o.a)(Q,2),P=J[0],B=J[1],H=Object(n.useState)([]),V=Object(o.a)(H,2),Y=V[0],K=V[1];function $(){Z(!1),B(!1)}var re=Object(n.useCallback)((function(){var e;P&&h.a.get((e=b.selected._id,"".concat(f).concat(g).concat(e))).then((function(e){return K(e.data)})).catch((function(e){return console.log(e)}))}),[P,b.selected]);Object(n.useEffect)((function(){re()}),[re]);var ae=Object(n.useCallback)((function(){"undefined"!==typeof b.selected._id&&h.a.get(N(b.selected._id)).then((function(e){p(e.data)})).catch((function(e){console.log(e.response),E.b.error("Something went wrong")}))}),[b.selected._id]);function le(){var e=w.map((function(e){return e._id})),t=b.users.filter((function(t){return!e.includes(t._id)}));R(t)}return Object(n.useEffect)((function(){ae()}),[ae]),Object(n.useEffect)((function(){""!==c&&"login"!==c&&(t.open(),p([]),t.emit("join",{_id:d.user._id,name:d.user.name,email:d.user.email,online:!0},c),t.on("currentOnlineUser",(function(e){var t=e.users;C(t),le()}))),""===c&&t.close()}),[]),Object(n.useEffect)((function(){t.on("message",(function(e){p((function(t){return[].concat(Object(G.a)(t),[{user:e.user.name,text:e.text}])}))})),t.on("currentOnlineUser",(function(e){var t=e.users;C(t),le()})),t.on("quizboi",(function(e){var t=e.quiz;I&&D(t),setTimeout((function(){D(null)}),6e3)}))}),[]),Object(A.jsxs)("div",{className:"right-section",children:[U&&Object(A.jsx)(te,{data:U,setQuiz:D}),Object(A.jsxs)("div",{className:"rigth-section-head",children:[s?Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)("h2",{children:"General"}),Object(A.jsxs)("ul",{children:[Object(A.jsx)("li",{className:T?"selected":null,onClick:function(){$(),Z(!0)},children:"Chat"}),Object(A.jsx)("li",{className:P?"selected":null,onClick:function(){$(),B(!0)},children:"Material"})]})]}):null,r?Object(A.jsx)(A.Fragment,{children:Object(A.jsxs)("div",{className:"container-two-side",children:[Object(A.jsxs)("div",{children:[Object(A.jsx)("h2",{children:b.selected.course}),Object(A.jsx)("span",{children:b.selected.name})]}),Object(A.jsx)("button",{onClick:function(){a(!0)},children:"Add Member"})]})}):null,l?Object(A.jsx)("h2",{children:"Ranking"}):null,i?Object(A.jsx)(A.Fragment,{children:Object(A.jsx)("h2",{children:"Quiz"})}):null]}),Object(A.jsxs)("div",{className:"right-section-container",children:[s?Object(A.jsxs)(A.Fragment,{children:[T?Object(A.jsx)(X,{getMessage:ae,socket:t,messages:m}):null,P?Object(A.jsxs)("div",{className:"file-upload-container",children:[Object(A.jsx)(ne,{fetchMaterail:re,user_id:d.user._id,course_id:b.selected._id}),Object(A.jsx)(se,{file:Y})]}):null]}):null,l?Object(A.jsx)(ce,{id:b.selected._id}):null,r?Object(A.jsx)(ie,{selectCourse:b,login:d,onlineUser:w,fillterOnlineUser:k,initCourse:j}):null,i?Object(A.jsx)(ee,{socket:t}):null]})]})};var le=function(e){var t=e.socket,c=e.fetchCourse,s=Object(l.h)(),r=Object(u.b)(),i=Object(u.c)((function(e){return e.login})),a=i.user,j=i.token,O=Object(u.c)((function(e){return e.selectCourse})),m=Object(n.useState)(s.pathname.split("/")[2]),v=Object(o.a)(m,1)[0],g=Object(n.useState)(!1),_=Object(o.a)(g,2),w=_[0],C=_[1],N=Object(n.useState)(!1),y=Object(o.a)(N,2),S=y[0],k=y[1],E=Object(n.useState)(!0),R=Object(o.a)(E,2),L=R[0],M=R[1],U=Object(n.useState)(!1),D=Object(o.a)(U,2),W=D[0],F=D[1],I=Object(n.useState)(!1),T=Object(o.a)(I,2),G=T[0],Z=T[1],Q=Object(n.useState)(!1),J=Object(o.a)(Q,2),P=J[0],B=J[1];function H(){var e,t;r(function(){var e=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:"UNLOAD_SELECTED_COURSE"});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),r((e=v,t=a._id,function(){var c=Object(b.a)(d.a.mark((function c(n){var s,r,i,a,l,o,u;return d.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return n({type:"LOADING_SELECTED_COURSE"}),c.next=3,h.a.get((j=e,"".concat(f).concat(p,"class/").concat(j)));case 3:return s=c.sent,c.next=6,h.a.get("".concat(f).concat(x,"alluser"));case 6:r=c.sent,i=r.data.map((function(e){return{_id:e._id,name:e.name,email:e.email,online:!1}})),(a=s.data.studentList.map((function(e){return e.user_id}))).push(s.data.classDetail.author_id),l=a.includes(t),o=i.filter((function(e){return!a.includes(e._id)})),u=i.filter((function(e){return a.includes(e._id)})),n({type:"GET_SELECTED_COURSE",payload:{selected:s.data.classDetail,courseAuthor:s.data.authorName,users:u,enrollList:o,enrolled:l}});case 14:case"end":return c.stop()}var j}),c)})));return function(e){return c.apply(this,arguments)}}()))}return Object(n.useEffect)((function(){H()}),[]),Object(n.useEffect)((function(){C(O.selected.author_id===a._id)}),[a,O]),Object(A.jsxs)(A.Fragment,{children:[S?Object(A.jsx)(q,{token:j,selected:O.selected,closeWindow:function(){k(!1)},initCourse:H}):null,Object(A.jsxs)("div",{className:"class-detail-container",children:[Object(A.jsx)(z,{selectCourse:O,courseAuthor:w,token:j,fetchCourse:c,setChatWindow:M,setAddMemberWindow:k,resetWindow:function(){M(!1),Z(!1),B(!1),F(!1)},setUserWindow:Z,setQuizWindow:B,setRankingWindow:F}),Object(A.jsx)("div",{className:"right-section",children:O.isLoading?"LOADING":Object(A.jsx)(A.Fragment,{children:Object(A.jsx)(ae,{socket:t,courseSelect:v,initCourse:H,chatWindow:L,userWindow:G,quizWindow:P,rankingWindow:W,setAddMemberWindow:k})})})]})]})};var oe=function(e){var t=e.closeWindow,c=e.fetchCourse,s=Object(n.useRef)(null),r=Object(n.useRef)(null),i=Object(u.c)((function(e){return e.login})).token,a=Object(n.useState)(null),l=Object(o.a)(a,2),j=l[0],d=l[1];return Object(A.jsx)("div",{className:"float-window",children:Object(A.jsxs)("div",{className:"float-window-container",children:[Object(A.jsxs)("div",{className:"user-container",children:[Object(A.jsx)("h4",{children:"Create your course"}),Object(A.jsxs)("form",{onSubmit:function(e){e.preventDefault(),h.a.post("".concat(f).concat(m,"add"),{course:s.current.value,name:r.current.value},{headers:{"auth-token":i}}).then((function(){E.b.success("Add couse success"),t(),c()})).catch((function(e){return d(e.response.data.details[0].message)}))},children:[Object(A.jsx)("div",{className:"error",children:j&&j}),Object(A.jsxs)("div",{children:[Object(A.jsx)("label",{htmlFor:"code",children:"Course code"}),Object(A.jsx)("input",{type:"text",ref:s})]}),Object(A.jsxs)("div",{children:[Object(A.jsx)("label",{htmlFor:"code",children:"Course name"}),Object(A.jsx)("input",{type:"text",ref:r})]}),Object(A.jsx)("button",{type:"submit",children:"AddCourse"})]})]}),Object(A.jsx)("div",{className:"button-container",children:Object(A.jsx)("button",{onClick:t,children:"Close"})})]})})};var ue=function(e){var t=e.closeWindow;return Object(A.jsx)("div",{className:"float-window",children:Object(A.jsxs)("div",{className:"float-window-container",children:[Object(A.jsxs)("div",{className:"user-container",children:[Object(A.jsx)("h4",{children:"Join course"}),Object(A.jsx)("label",{children:"join course sucess! wait for Author accepted"})]}),Object(A.jsx)("div",{className:"svg-container",children:Object(A.jsxs)("svg",{id:"a4efc002-80f6-4f30-a290-092c25b18b21","data-name":"Layer 1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1149 784.07921",children:[Object(A.jsx)("title",{children:"done"}),Object(A.jsx)("path",{d:"M460.5,805.0396c0,20.43-95.81,37-214,37s-214-16.57-214-37c0-5.11,5.98-9.97,16.8-14.39,31.5-12.89,104.03-22.05,189.28-22.58q3.945-.02994,7.92-.03C364.69,768.0396,460.5,784.60961,460.5,805.0396Z",transform:"translate(-25.5 -57.9604)",fill:"#3f3d56"}),Object(A.jsx)("path",{d:"M238.58,768.06957a121.49608,121.49608,0,0,1-189.28,22.58C80.8,777.75957,153.33,768.5996,238.58,768.06957Z",transform:"translate(-25.5 -57.9604)",opacity:"0.1"}),Object(A.jsx)("ellipse",{cx:"112",cy:"628.07921",rx:"112",ry:"120",fill:"#3f3d56"}),Object(A.jsx)("path",{d:"M274.92695,141.29722c15.8799,61.17672,67.10876,100.71792,114.5379,88.40654",transform:"translate(-25.5 -57.9604)",fill:"#3f3d56"}),Object(A.jsx)("path",{d:"M389.46485,229.70376c-16.05832-61.86409,13.77629-123.041,66.70446-136.77977",transform:"translate(-25.5 -57.9604)",fill:"#6c63ff"}),Object(A.jsx)("path",{d:"M307.45641,138.77285c15.08422,58.11138,51.76377,98.78165,82.00844,90.93091",transform:"translate(-25.5 -57.9604)",fill:"#6c63ff"}),Object(A.jsx)("path",{d:"M389.46485,229.70376c-20.519-79.04856,12.38076-155.86347,73.55748-171.74336",transform:"translate(-25.5 -57.9604)",fill:"#3f3d56"}),Object(A.jsx)("path",{d:"M371.61557,235.16986s12.07173-3.53356,15.06127-7.09706,17.23169-10.58881,19.22867-6.63665,23.69491,16.08378,9.98492,19.76083-32.47825,6.1463-36.71739,4.86676S371.61557,235.16986,371.61557,235.16986Z",transform:"translate(-25.5 -57.9604)",fill:"#a8a8a8"}),Object(A.jsx)("path",{d:"M415.75716,239.67536c-13.71,3.67708-32.47824,6.14632-36.71739,4.86677-3.22834-.97444-5.92072-6.779-7.02206-9.49357-.25452.07789-.40214.12129-.40214.12129s3.31832,9.61433,7.55747,10.89388,23.00741-1.1897,36.71739-4.86677c3.95754-1.06142,4.96115-2.828,4.34348-4.89825C420.0107,237.70432,418.70281,238.88535,415.75716,239.67536Z",transform:"translate(-25.5 -57.9604)",opacity:"0.2"}),Object(A.jsx)("rect",{x:"343",y:"126.07921",width:"806",height:"467",fill:"#f2f2f2"}),Object(A.jsx)("rect",{x:"362",y:"267.82921",width:"442",height:"231.5",fill:"#6c63ff",opacity:"0.3"}),Object(A.jsx)("rect",{x:"838",y:"257.7371",width:"177.2807",height:"9.80702",fill:"#3f3d56"}),Object(A.jsx)("rect",{x:"838",y:"275.84236",width:"258",height:"9.80702",fill:"#3f3d56"}),Object(A.jsx)("rect",{x:"838",y:"319.59675",width:"177.2807",height:"9.80702",fill:"#3f3d56"}),Object(A.jsx)("rect",{x:"838",y:"392.0178",width:"177.2807",height:"9.80702",fill:"#3f3d56"}),Object(A.jsx)("rect",{x:"838",y:"337.70201",width:"258",height:"9.80702",fill:"#3f3d56"}),Object(A.jsx)("rect",{x:"838",y:"355.80728",width:"258",height:"9.80702",fill:"#3f3d56"}),Object(A.jsx)("rect",{x:"838",y:"373.91254",width:"258",height:"9.80702",fill:"#3f3d56"}),Object(A.jsx)("rect",{x:"838",y:"435.77219",width:"92.78947",height:"25.64912",fill:"#6c63ff"}),Object(A.jsx)("path",{d:"M339.98755,465.874s16.65689-47.19452,28.68687-32.3884S350.16676,473.277,350.16676,473.277Z",transform:"translate(-25.5 -57.9604)",fill:"#a0616a"}),Object(A.jsx)("path",{d:"M261.33,419.60481l10.02028,3.71358s4.78585,21.27176,2.93508,24.97329-2.77615.92538,0,8.32844,11.10459,26.8361,12.03,29.61225,53.67219-17.58227,53.67219-27.76148c0,0,11.1046,12.95535,16.65689,15.7315,0,0-61.07526,44.41837-69.4037,49.97067s-12.95536,2.77615-20.35842-3.70153-38.86607-60.14988-38.86607-60.14988Z",transform:"translate(-25.5 -57.9604)",fill:"#575a89"}),Object(A.jsx)("path",{d:"M288.16612,748.11568s-.92538,10.17921-2.77615,11.10459-15.7315,24.05995,0,28.68686,24.98534,2.77615,28.68687,4.62692,68.47832,5.55229,69.4037-4.62692-31.463-12.03-31.463-12.03-29.61225-19.433-34.23916-29.61225S288.16612,748.11568,288.16612,748.11568Z",transform:"translate(-25.5 -57.9604)",fill:"#2f2e41"}),Object(A.jsx)("path",{d:"M100.31343,766.62333S78.10425,804.564,83.65654,809.19094s59.62519,21.48848,67.55294,22.20918c10.17921.92538,17.58227-7.40306,9.25383-12.03s-25.91072-24.05995-25.91072-30.53762V772.17563Z",transform:"translate(-25.5 -57.9604)",fill:"#2f2e41"}),Object(A.jsx)("path",{d:"M79.02963,518.62076s-19.433,24.05995,11.10459,62.926l50.89605,64.77679s-31.463,49.97066-32.3884,75.88138-7.40306,20.35842-9.25382,31.463-10.17921,5.5523-3.70153,13.88074,30.53763,15.73151,37.94069,9.25383,7.40306-14.80612,7.40306-18.50765,12.95536-24.98534,13.88074-31.463,35.16454-59.22449,35.16454-59.22449,11.1046-31.463-1.85076-49.04528-21.51631-42.51892-21.51631-42.51892,38.1732,46.22045,65.0093,57.325c0,0,10.17921,1.85076,8.32844,6.47768s0,7.40306,2.77615,12.03,22.20918,58.29911,28.68686,72.17986,3.70153,22.20918,11.1046,26.83609,40.71683.92539,40.71683-3.70153-4.62691-16.65689-7.40306-23.13456-24.98533-81.43368-23.13456-94.389-.92539-30.53763-14.80613-37.94069-84.20983-67.55294-87.91136-67.55294S79.02963,518.62076,79.02963,518.62076Z",transform:"translate(-25.5 -57.9604)",fill:"#2f2e41"}),Object(A.jsx)("circle",{cx:"239.53155",cy:"276.5092",r:"38.86607",fill:"#a0616a"}),Object(A.jsx)("path",{d:"M233.56854,338.17113s-12.03,21.28381-26.8361,24.06,38.86608,45.34376,38.86608,45.34376,12.95535-40.71684,24.06-42.56761S233.56854,338.17113,233.56854,338.17113Z",transform:"translate(-25.5 -57.9604)",fill:"#a0616a"}),Object(A.jsx)("path",{d:"M271.50923,425.15711c0,12.03-36.08992,46.26913-36.08992,46.26913l-34.23916,28.68687s-.92539,10.17921-4.62692,11.10459-8.32844.92538-4.62691,6.47768,12.95536,17.58227,4.62691,19.433a68.02832,68.02832,0,0,1-7.57883.72177c-2.221.12956-4.83047.24987-7.76408.36091-6.84775.24061-15.4168.39791-24.69842.33312q-3.95614-.01389-8.05078-.09251c-34.98877-.694-75.52058-4.71949-72.20764-17.98018,5.5523-22.20919,1.85077-29.61225,13.88074-41.64222s31.463-53.6722,31.463-53.6722,38.86608-65.70217,71.25447-65.70217l6.72755-1.76752a15.40619,15.40619,0,0,1,16.81413,6.45921c6.49621,9.89235,16.74026,24.754,22.72746,29.54747,9.25382,7.40306,10.69748,2.09137,10.69748,2.09137S271.50923,413.12713,271.50923,425.15711Z",transform:"translate(-25.5 -57.9604)",fill:"#575a89"}),Object(A.jsx)("path",{d:"M189.15017,565.81528s26.8361,41.64222,10.17921,49.04528-25.91072-43.493-25.91072-43.493Z",transform:"translate(-25.5 -57.9604)",fill:"#a0616a"}),Object(A.jsx)("path",{d:"M239.62313,330.07964c1.49163-.18823,1.96338-2.07034,2.21445-3.5527,1.34448-7.93817,7.26028-15.4657,15.20887-16.74716a21.53482,21.53482,0,0,1,9.06163.73028,34.38206,34.38206,0,0,1,11.627,5.72293c1.8356,1.38836,3.60212,3,5.81038,3.64852,1.4584.42831,7.65073,3.18129,9.09759,3.6471,3.18107,1.02413,5.81348,4.35366,9.08966,3.6944,3.13435-.63071,4.32474-4.41557,4.82851-7.5728,1.14768-7.19282-2.96937-17.92518-7.06272-23.95-3.10629-4.572-8.36282-7.20324-13.61849-8.915a97.8475,97.8475,0,0,0-18.88745-3.753c-8.645-1.021-17.59876-1.56268-25.88354,1.10952s-15.82851,9.209-17.37513,17.77557c-.32218,1.7845-.38254,3.61229-.77737,5.38213-.96316,4.31751-3.81984,7.94662-5.48621,12.0444a23.19276,23.19276,0,0,0,.70753,18.80183c2.30751,4.64043,6.32027,9.09971,5.45427,14.20932l7.14107-5.63086a5.18636,5.18636,0,0,0,2.38361-6.07029l-1.03811-8.94161c-.19008-1.63724-.35562-3.404.46319-4.83437C235.75578,321.33353,237.1361,330.39345,239.62313,330.07964Z",transform:"translate(-25.5 -57.9604)",fill:"#2f2e41"}),Object(A.jsx)("path",{d:"M172.49328,501.96387l8.717,36.24723c-8.79114.31465-20.423.48122-32.7492.24061-3.10939-9.32788-6.07983-19.05366-8.35623-28.15939-8.32845-33.31378,5.55229-84.20983,12.95536-108.26978S178.971,371.48491,178.971,371.48491s9.25383,2.77615,21.2838,11.10459S172.49328,501.96387,172.49328,501.96387Z",transform:"translate(-25.5 -57.9604)",opacity:"0.1"}),Object(A.jsx)("path",{d:"M179.89634,500.11311l9.07806,37.73708c-2.221.12956-4.83047.24987-7.76408.36091-6.84775.24061-15.4168.39791-24.69842.33312-3.3405-9.91081-6.5703-20.36768-9.004-30.10267-8.32845-33.31378,5.5523-84.20982,12.95536-108.26978s23.59726,2.31346,23.59726,2.31346-6.47768-15.7315,5.55229-7.40306S179.89634,500.11311,179.89634,500.11311Z",transform:"translate(-25.5 -57.9604)",opacity:"0.1"}),Object(A.jsx)("path",{d:"M182.67249,369.63415s-18.50765,6.47767-25.91071,30.53762-21.28381,74.956-12.95536,108.26978,25.91071,74.956,25.91071,74.956,17.58228-12.95536,24.06-10.17921l-17.58227-73.10523s39.79146-111.04593,27.76148-119.37437S182.67249,369.63415,182.67249,369.63415Z",transform:"translate(-25.5 -57.9604)",fill:"#575a89"}),Object(A.jsx)("rect",{x:"343",y:"243.82921",width:"442",height:"231.5",fill:"#3f3d56"}),Object(A.jsx)("ellipse",{cx:"572.22317",cy:"364.11087",rx:"50.01735",ry:"50.10831",fill:"#fff"}),Object(A.jsx)("path",{d:"M597.72317,363.42341A59.77683,59.77683,0,1,0,657.5,423.20024,59.95257,59.95257,0,0,0,597.72317,363.42341Zm-12.27149,91.64822L554.81605,424.436l8.59292-8.59291,22.07145,22.07145,46.58569-46.5857,8.59292,8.59292-55.20735,55.14987Z",transform:"translate(-25.5 -57.9604)",fill:"#6c63ff"})]})}),Object(A.jsx)("div",{className:"button-container",children:Object(A.jsx)("button",{onClick:t,children:"Close"})})]})})};var je=function(){return Object(A.jsxs)("div",{className:"data-not-found",children:[Object(A.jsxs)("svg",{id:"b21613c9-2bf0-4d37-bef0-3b193d34fc5d","data-name":"Layer 1",xmlns:"http://www.w3.org/2000/svg",width:"647.63626",height:"632.17383",viewBox:"0 0 647.63626 632.17383",children:[Object(A.jsx)("path",{d:"M687.3279,276.08691H512.81813a15.01828,15.01828,0,0,0-15,15v387.85l-2,.61005-42.81006,13.11a8.00676,8.00676,0,0,1-9.98974-5.31L315.678,271.39691a8.00313,8.00313,0,0,1,5.31006-9.99l65.97022-20.2,191.25-58.54,65.96972-20.2a7.98927,7.98927,0,0,1,9.99024,5.3l32.5498,106.32Z",transform:"translate(-276.18187 -133.91309)",fill:"#f2f2f2"}),Object(A.jsx)("path",{d:"M725.408,274.08691l-39.23-128.14a16.99368,16.99368,0,0,0-21.23-11.28l-92.75,28.39L380.95827,221.60693l-92.75,28.4a17.0152,17.0152,0,0,0-11.28028,21.23l134.08008,437.93a17.02661,17.02661,0,0,0,16.26026,12.03,16.78926,16.78926,0,0,0,4.96972-.75l63.58008-19.46,2-.62v-2.09l-2,.61-64.16992,19.65a15.01489,15.01489,0,0,1-18.73-9.95l-134.06983-437.94a14.97935,14.97935,0,0,1,9.94971-18.73l92.75-28.4,191.24024-58.54,92.75-28.4a15.15551,15.15551,0,0,1,4.40966-.66,15.01461,15.01461,0,0,1,14.32032,10.61l39.0498,127.56.62012,2h2.08008Z",transform:"translate(-276.18187 -133.91309)",fill:"#3f3d56"}),Object(A.jsx)("path",{d:"M398.86279,261.73389a9.0157,9.0157,0,0,1-8.61133-6.3667l-12.88037-42.07178a8.99884,8.99884,0,0,1,5.9712-11.24023l175.939-53.86377a9.00867,9.00867,0,0,1,11.24072,5.9707l12.88037,42.07227a9.01029,9.01029,0,0,1-5.9707,11.24072L401.49219,261.33887A8.976,8.976,0,0,1,398.86279,261.73389Z",transform:"translate(-276.18187 -133.91309)",fill:"#6c63ff"}),Object(A.jsx)("circle",{cx:"190.15351",cy:"24.95465",r:"20",fill:"#6c63ff"}),Object(A.jsx)("circle",{cx:"190.15351",cy:"24.95465",r:"12.66462",fill:"#fff"}),Object(A.jsx)("path",{d:"M878.81836,716.08691h-338a8.50981,8.50981,0,0,1-8.5-8.5v-405a8.50951,8.50951,0,0,1,8.5-8.5h338a8.50982,8.50982,0,0,1,8.5,8.5v405A8.51013,8.51013,0,0,1,878.81836,716.08691Z",transform:"translate(-276.18187 -133.91309)",fill:"#e6e6e6"}),Object(A.jsx)("path",{d:"M723.31813,274.08691h-210.5a17.02411,17.02411,0,0,0-17,17v407.8l2-.61v-407.19a15.01828,15.01828,0,0,1,15-15H723.93825Zm183.5,0h-394a17.02411,17.02411,0,0,0-17,17v458a17.0241,17.0241,0,0,0,17,17h394a17.0241,17.0241,0,0,0,17-17v-458A17.02411,17.02411,0,0,0,906.81813,274.08691Zm15,475a15.01828,15.01828,0,0,1-15,15h-394a15.01828,15.01828,0,0,1-15-15v-458a15.01828,15.01828,0,0,1,15-15h394a15.01828,15.01828,0,0,1,15,15Z",transform:"translate(-276.18187 -133.91309)",fill:"#3f3d56"}),Object(A.jsx)("path",{d:"M801.81836,318.08691h-184a9.01015,9.01015,0,0,1-9-9v-44a9.01016,9.01016,0,0,1,9-9h184a9.01016,9.01016,0,0,1,9,9v44A9.01015,9.01015,0,0,1,801.81836,318.08691Z",transform:"translate(-276.18187 -133.91309)",fill:"#6c63ff"}),Object(A.jsx)("circle",{cx:"433.63626",cy:"105.17383",r:"20",fill:"#6c63ff"}),Object(A.jsx)("circle",{cx:"433.63626",cy:"105.17383",r:"12.18187",fill:"#fff"})]}),Object(A.jsx)("span",{children:"You are not in any course. Join some course?"})]})};var de=function(e){var t=e.user,c=e.LogoutHandle,s=e.setChangeProfilePictureWindow,r=Object(n.useState)(!1),i=Object(o.a)(r,2),a=i[0],l=i[1];return Object(A.jsxs)("div",{className:"user-control",children:[Object(A.jsx)("div",{className:"user-profile-picture",onClick:function(){return l(!a)},children:Object(A.jsx)("img",{src:t.picture||"https://via.placeholder.com/50",alt:"profilePic"})}),Object(A.jsx)("div",{className:a?"user-menu open":"user-menu",children:Object(A.jsxs)("ul",{children:[Object(A.jsx)("li",{children:Object(A.jsxs)("div",{className:"user-detail",children:[Object(A.jsx)("img",{src:t.picture||"https://via.placeholder.com/50",alt:"profilePic",onClick:function(){return s(!0)}}),Object(A.jsxs)("div",{children:[Object(A.jsx)("h4",{children:t.name}),Object(A.jsx)("h5",{children:t.email})]})]})}),Object(A.jsx)("hr",{}),Object(A.jsx)("li",{onClick:c,children:Object(A.jsx)("button",{children:"Sign out"})})]})})]})};function be(){return Object(A.jsx)("div",{className:"side-nav",children:Object(A.jsxs)("div",{children:[Object(A.jsx)(L.a,{}),Object(A.jsx)("span",{children:"Course"})]})})}function Oe(e){var t=e.closeWindow,c=e.user,s=Object(n.useState)([]),r=Object(o.a)(s,2),i=r[0],a=r[1],l=Object(u.b)(),j=Object(n.useRef)(null);return Object(A.jsx)("div",{className:"float-window",children:Object(A.jsxs)("form",{className:"float-window-container",onSubmit:function(e){e.preventDefault();var n,s=new FormData;i.length>0&&s.append("file",i[0]),j.current.value.length>0&&s.append("name",j.current.value),h.a.patch((n=c._id,"".concat(f).concat(g,"profile/").concat(n)),s).then((function(e){E.b.success("Profile updated"),l(k()),t()})).catch((function(e){console.log(e),E.b.error(e.response.data)}))},children:[Object(A.jsxs)("div",{children:[Object(A.jsx)("h2",{children:"User profile"}),Object(A.jsxs)("div",{className:"hidden-input",children:[i.length>0?Object(A.jsx)("h5",{children:i[0].name}):Object(A.jsx)("span",{children:"Select picture to upload"}),Object(A.jsx)("input",{type:"file",onChange:function(e){a(e.target.files)}})]}),Object(A.jsx)("input",{type:"text",placeholder:c.name,ref:j,className:"file-name-input"})]}),Object(A.jsxs)("div",{className:"button-container two-button",children:[Object(A.jsx)("button",{type:"submit",className:"secondary-btn",children:"Update profile"}),Object(A.jsx)("button",{onClick:t,children:"Close"})]})]})})}var he=function(e){var t=e.socket,c=e.setLogin,s=Object(u.b)(),r=Object(l.h)(),i=Object(u.c)((function(e){return e.login})),j=i.user,O=i.token,x=Object(u.c)((function(e){return e.course})),m=Object(n.useState)([]),v=Object(o.a)(m,2),g=v[0],_=v[1],w=Object(n.useState)(!0),N=Object(o.a)(w,2),S=N[0],k=N[1],E=Object(n.useState)(!0),R=Object(o.a)(E,2),L=R[0],U=R[1],D=Object(n.useState)(!1),W=Object(o.a)(D,2),I=W[0],q=W[1],z=Object(n.useState)(!1),T=Object(o.a)(z,2),G=T[0],Z=T[1],Q=Object(n.useState)(!1),J=Object(o.a)(Q,2),P=J[0],B=J[1],H=function(){q(!1),Z(!1),B(!1)};function V(){var e,t;"undefined"!==typeof j&&s((e=j._id,t=function(){!function(){if(U(!1),j.is_admin){var e=x.courses.filter((function(e){return e.author_id===j._id}));_(e)}}()},function(){var c=Object(b.a)(d.a.mark((function c(n){var s,r,i,a;return d.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if("undefined"!==typeof e){c.next=2;break}return c.abrupt("return");case 2:return n({type:"LOADING_COURSE"}),c.next=5,h.a.get("".concat(f).concat(p));case 5:return s=c.sent,c.next=8,h.a.get((l=e,"".concat(f).concat(p,"student/").concat(l)));case 8:return r=c.sent,i=[],c.next=12,Promise.all(r.data.map(function(){var e=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.get(C(t.course_id)).then((function(e){i.push(e.data)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 12:return c.next=14,h.a.get(y(e)).then((function(e){return e.data}));case 14:a=c.sent,n({type:"GET_ALL_COURSE",payload:{courses:s.data,mycourses:i,waitlist:a}}),t();case 17:case"end":return c.stop()}var l}),c)})));return function(e){return c.apply(this,arguments)}}()))}return Object(n.useEffect)((function(){V()}),[r,j,L,c]),Object(n.useEffect)((function(){0===g.length&&0===x.mycourses.length?k(!0):k(!1)}),[g,x]),Object(A.jsxs)("div",{className:"home",children:[I?Object(A.jsx)(oe,{fetchCourse:V,closeWindow:H}):null,G?Object(A.jsx)(ue,{closeWindow:H}):null,P?Object(A.jsx)(Oe,{closeWindow:H,user:j}):null,Object(A.jsxs)("nav",{className:"nav",children:[Object(A.jsx)("div",{children:Object(A.jsx)(a.b,{to:"/",id:"logo",children:"ClassAid"})}),Object(A.jsx)(de,{LogoutHandle:function(){s(function(){var e=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:localStorage.clear(),t({type:"USER_LOGOUT"});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},user:j,setChangeProfilePictureWindow:B})]}),Object(A.jsxs)("div",{className:"bottom",children:[Object(A.jsx)(be,{}),Object(A.jsxs)("div",{className:"content",children:[Object(A.jsx)(l.b,{path:"/joinCourse",exact:!0,children:Object(A.jsx)(F,{course:x,setAddCourseWindow:q,setWaitListWindow:Z,fetchCourse:V,user:j,token:O})}),Object(A.jsx)(l.b,{path:"/",exact:!0,children:Object(A.jsxs)("div",{className:"course-section-container",children:[Object(A.jsxs)("div",{className:"course-head",children:[Object(A.jsx)("h3",{children:"Course"}),Object(A.jsx)(a.b,{to:"/joinCourse",children:j.is_admin?"Join or create course":"Join course"})]}),S?Object(A.jsx)(je,{}):Object(A.jsxs)(A.Fragment,{children:[j.is_admin?Object(A.jsx)(M,{name:"Author course",courses:g,user:j}):null,Object(A.jsx)(M,{name:"Your course",courses:x.mycourses,user:j})]})]})}),Object(A.jsx)(l.b,{path:"/course/:id",exact:!0,children:Object(A.jsx)(le,{socket:t,fetchCourse:V})})]})]})]})};c(148);var fe=function(){var e=Object(u.b)(),t=Object(n.useState)(!1),c=Object(o.a)(t,2),s=c[0],r=c[1],i=Object(u.c)((function(e){return e.login})).login_error,l=Object(n.useRef)(null),j=Object(n.useRef)(null);return Object(A.jsxs)("div",{className:"login-container",children:[Object(A.jsx)("h1",{children:"Sign in to ClassAid"}),i&&Object(A.jsx)("div",{className:"form-error",children:i}),Object(A.jsxs)("form",{onSubmit:function(t){var c,n;t.preventDefault(),r(!0),e((c=l.current.value,n=j.current.value,function(){var e=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.post("".concat(f).concat(x,"login"),{email:c,password:n}).then((function(e){var c=Object(S.a)(e.data);t({type:"USER_LOGIN",payload:{user:c,token:e.data,isLogin:!0}}),t({type:"CLEAR_ERROR"}),localStorage.setItem("token",e.data),localStorage.setItem("user",JSON.stringify(c))})).catch((function(e){t({type:"ERROR_LOGIN",payload:{error:e.response.data}})}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),r(!1)},className:"login-form",children:[Object(A.jsxs)("div",{children:[Object(A.jsx)("span",{children:"Email address"}),Object(A.jsx)("input",{type:"text",ref:l,required:!0})]}),Object(A.jsxs)("div",{children:[Object(A.jsx)("span",{children:"Password"}),Object(A.jsx)("input",{type:"password",ref:j,required:!0})]}),Object(A.jsx)("div",{children:Object(A.jsx)("button",{type:"submit",className:s?"clicked":null,children:"Sign In"})})]}),Object(A.jsxs)("div",{className:"signup-container",children:[Object(A.jsx)("span",{children:"New to ClassAid?"}),Object(A.jsx)(a.b,{to:"/signup",children:"Create an account."})]})]})},xe=function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.login})).register_error,c=Object(n.useRef)(),s=Object(n.useRef)(),r=Object(n.useRef)(),i=Object(n.useRef)();return Object(A.jsxs)("div",{className:"register-container",children:["SUCCESS"===t?Object(A.jsx)(l.a,{to:"/login"}):null,Object(A.jsx)("h4",{id:"classaid",children:"Join ClassAid"}),Object(A.jsx)("h1",{children:"Create your account"}),t&&Object(A.jsx)("div",{className:"error",children:t}),Object(A.jsxs)("form",{className:"form",onSubmit:function(t){t.preventDefault();var n={name:r.current.value,email:c.current.value,password:s.current.value,is_admin:Boolean("true"===i.current.value)};e(function(e,t){var c=e.name,n=e.email,s=e.password,r=e.is_admin;return function(){var e=Object(b.a)(d.a.mark((function e(i){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.post("".concat(f).concat(x,"register"),{name:c,email:n,password:s,is_admin:r}).then((function(e){t(),i({type:"ERROR_REGISTER",payload:{register_error:"SUCCESS"}}),i({type:"CLEAR_ERROR"})})).catch((function(e){return i({type:"ERROR_REGISTER",payload:{register_error:e.response.data}}),!1}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}(n,(function(){return E.b.success("Register Success")})))},children:[Object(A.jsxs)("div",{children:[Object(A.jsx)("span",{children:"Name"}),Object(A.jsx)("input",{ref:r,type:"text",required:!0})]}),Object(A.jsxs)("div",{children:[Object(A.jsx)("span",{children:"Email"}),Object(A.jsx)("input",{ref:c,type:"text",required:!0})]}),Object(A.jsxs)("div",{children:[Object(A.jsx)("span",{children:"Password"}),Object(A.jsx)("input",{ref:s,type:"password",required:!0})]}),Object(A.jsxs)("div",{children:[Object(A.jsx)("span",{children:"Role"}),Object(A.jsxs)("select",{ref:i,children:[Object(A.jsx)("option",{value:!1,children:"Student"}),Object(A.jsx)("option",{value:!0,children:"Teacher"})]})]}),Object(A.jsx)("div",{className:"login-button-group",children:Object(A.jsx)("button",{type:"submit",children:"Create account"})})]}),Object(A.jsxs)("div",{className:"login-page",children:[Object(A.jsx)("span",{children:"Already member? "}),Object(A.jsx)(a.b,{to:"/login",children:"Login"})]})]})},me=c(95),pe=c.n(me)()("https://chat-class-aid.herokuapp.com",{autoConnect:!1,transports:["websocket"]});var ve=function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.login})).isLogin,c=Object(n.useState)(t||!1),s=Object(o.a)(c,2),r=s[0],i=s[1];return Object(n.useEffect)((function(){i(t)}),[t]),Object(n.useEffect)((function(){null!==localStorage.getItem("token")&&null!==localStorage.getItem("user")?(e(k()),i(!0)):i(!1)}),[e]),Object(A.jsxs)("div",{className:"App",children:[Object(A.jsx)(E.a,{}),r?Object(A.jsx)(l.a,{to:"/"}):Object(A.jsx)(l.a,{to:"/login"}),Object(A.jsx)(l.b,{path:"/login",exact:!0,children:Object(A.jsx)(fe,{})}),Object(A.jsx)(l.b,{path:"/signup",exact:!0,children:Object(A.jsx)(xe,{})}),Object(A.jsx)(l.b,{path:["/","/course/:id","/addCourse","/joinCourse"],exact:!0,children:Object(A.jsx)(he,{socket:pe,login:r,setLogin:i})}),Object(A.jsx)(l.b,{path:"*",children:r?Object(A.jsx)(l.a,{to:"/"}):Object(A.jsx)(l.a,{to:"/login"})})]})},ge=c(26),_e={user:{},token:null,login_error:null,register_error:null,isLogin:!1},we=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_e,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_LOGIN":return Object(U.a)(Object(U.a)({},e),{},{user:t.payload.user,token:t.payload.token,isLogin:!0});case"ERROR_LOGIN":return Object(U.a)(Object(U.a)({},e),{},{login_error:t.payload.error,isLogin:!1});case"USER_LOGOUT":return Object(U.a)(Object(U.a)({},e),{},{user:{},token:null,login_error:null,isLogin:!1});case"USER_REGISTER":return Object(U.a)({},e);case"ERROR_REGISTER":return Object(U.a)(Object(U.a)({},e),{},{register_error:t.payload.register_error});case"CLEAR_ERROR":return Object(U.a)(Object(U.a)({},e),{},{login_error:null,register_error:null});default:return Object(U.a)({},e)}},Ce={allUsers:[],isLogin:!1},Ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ce,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ALL_USER":return Object(U.a)(Object(U.a)({},e),{},{allUsers:t.payload.allUsers,isLoading:!0});default:return Object(U.a)({},e)}},ye={courses:[],mycourses:[],waitlist:[],isLoading:!0},Se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ye,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ALL_COURSE":return Object(U.a)(Object(U.a)({},e),{},{courses:t.payload.courses,mycourses:t.payload.mycourses,waitlist:t.payload.waitlist,isLoading:!1});case"LOADING_COURSE":return Object(U.a)(Object(U.a)({},e),{},{isLoading:!0});default:return Object(U.a)({},e)}},ke={selected:[],courseAuthor:{},users:[],enrollList:[],enrolled:!1},Ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ke,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_SELECTED_COURSE":return Object(U.a)(Object(U.a)({},e),{},{selected:t.payload.selected,courseAuthor:t.payload.courseAuthor,users:t.payload.users,enrollList:t.payload.enrollList,enrolled:t.payload.enrolled,isLoading:!1});case"LOADING_SELECTED_COURSE":return Object(U.a)(Object(U.a)({},e),{},{isLoading:!0});case"UNLOAD_SELECTED_COURSE":return Object(U.a)(Object(U.a)({},e),{},{selected:[],courseAuthor:{},users:[],enrollList:[],enrolled:!1});case"ONLINE_ON_COURSE":return Object(U.a)(Object(U.a)({},e),{},{users:t.payload.users});default:return Object(U.a)({},e)}},Re={message:[],isLoading:!0},Le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_MSG":return Object(U.a)(Object(U.a)({},e),{},{message:[].concat(Object(G.a)(e.message),[t.payload.message]),isLoading:!1});default:return Object(U.a)({},e)}},Ae=Object(ge.c)({user:Ne,login:we,course:Se,selectCourse:Ee,authorCourse:Le}),Me=c(96),Ue=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||ge.d,De=Object(ge.e)(Ae,Ue(Object(ge.a)(Me.a)));i.a.render(Object(A.jsx)(s.a.StrictMode,{children:Object(A.jsx)(u.a,{store:De,children:Object(A.jsx)(a.a,{children:Object(A.jsx)(l.d,{children:Object(A.jsx)(ve,{})})})})}),document.getElementById("root"))}},[[179,1,2]]]);
//# sourceMappingURL=main.de8829d7.chunk.js.map